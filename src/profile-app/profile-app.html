
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link href="https://use.fontawesome.com/releases/v5.8.0/css/all.css" rel="stylesheet" crossorigin="anonymous">


<dom-module id="profile-app">
  <template>
    <style>
      :host {
        display: block;
      }
      .selected {
        color: orange;
      }
      .tool {
        cursor: pointer;
      }
      .icon {
        height: 32px;
        width: 32px;
      }
      .icon-link i {
        padding: 5px 10px;
        color: black;
      }
      #resume i {
        color: coral;
      }
      #examples i {
        color: lightcoral;
      }
      .icon-link {
        text-decoration: none !important;
      }
      #profile {
        position: relative;
        overflow-y: scroll;
      }
    </style>
    <link href="https://use.fontawesome.com/releases/v5.8.0/css/all.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- <br/> -->
    <div style="display: none;">
      <div>
        <nav id="navbarexample2" class="navbar navbar-light bg-light">
          <a class="navbar-brand" href="#">Navbar</a>
          <ul class="nav nav-pills">
            <li class="nav-item">
              <a class="nav-link" href="#fat">@fat</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#mdo">@mdo</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Dropdown</a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="#one">one</a>
                <a class="dropdown-item" href="#two">two</a>
                <div role="separator" class="dropdown-divider"></div>
                <a class="dropdown-item" href="#three">three</a>
              </div>
            </li>
          </ul>
        </nav>
        <!-- <div id="examplenav" data-spy="scroll" data-target="#navbarexample2" data-offset="0" style="position: relative; height: 500px;"> -->
        <!-- <div id="examplenav" data-spy="scroll" data-target="#navbarexample2" data-offset="0" style="position: relative; height: 200px; overflow-y: scroll;"> -->
        <!-- <div id="examplenav" style="height: 200px; overflow-y: scroll;"> -->
        <div id="examplenav" style="position: relative; height: 200px; overflow-y: scroll;">
          <h4 id="fat">@fat</h4>
          <p>...</p>
          <h4 id="mdo">@mdo</h4>
          <p>...</p>
          <h4 id="one">one</h4>
          <p>...</p>
          <h4 id="two">two</h4>
          <p>...</p>
          <h4 id="three">three</h4>
          <p>...</p>
        </div>
      </div>
    </div>
    <nav id="navbarprofile" class="navbar sticky-top navbar-light bg-light">
      <a class="navbar-brand" href="#">Barra</a>
      <ul class="nav nav-pills">
          <li class="nav-item">
            <a class="nav-link" href="#algo">info</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#qwerty">projects</a>
          </li>
        </ul>
    </nav>
    <!-- <div id="profile"> -->
    <div id="profile" style="height: {{fixSize}}px;">
    <!-- <div id="profile" style="position: relative; height: 100%; overflow-y: scroll;"> -->
      <h4 id="algo"></h4>
      <!-- <br/> -->
      <div class="card text-center border-dark mx-auto" style="width: 90%; max-width: 750px;">
        <img class="card-img-top" style="height:150px; object-fit: cover;" 
        src="{{profile.background}}" />
        <div style="height: 100px;">
          <img style="position: relative; top: -100px;" class="mx-auto d-block rounded-circle border border-dark" src="./images/0.jpeg" />
        </div>
        <div class="card-body">
          <h3 class="card-title">{{data.name}}</h3>
          <h5 class="card-subtitle mb-2 text-muted">{{data.career}} - {{data.id}}</h5>
          <h5 class="card-subtitle mb-2 text-muted">
            <a id="mail" href="#" title="{{messages.copied}}">{{data.email}}</a>
          </h5>
        </div>
        <div class="card-footer">
          <a class="icon-link" target="_blank" href="{{data.linkedin}}">
            <!-- <img class="icon" src="{{icons.linkedin}}" /> -->
            <!-- <i class="fa fa-camera-retro fa-2x"></i> -->
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
          <a class="icon-link" target="_blank" href="{{data.github}}">
            <!-- <img class="icon" src="{{icons.github}}" /> -->
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
          <a id="examples" title="{{messages.examples}}" class="icon-link" target="_blank" href="{{data.cf}}">
            <!-- <img class="icon" src="{{icons.code}}" /> -->
            <i class="fas fa-code fa-2x" aria-hidden="true"></i>
          </a>
          <a id="resume" title="{{messages.resume}}" class="icon-link" target="_blank" href="{{data.resume}}">
            <!-- <img class="icon" src="{{icons.download}}" /> -->
            <i class="far fa-file-pdf fa-2x" aria-hidden="true"></i>
          </a>
            <!-- <i class="fab fa-js fa-2x" aria-hidden="true"></i> -->
            <ion-icon name="logo-polymer"></ion-icon>
        </div>
      </div>
      <br/>
      <h4 id="qwerty"></h4>
      <div class="card mx-auto border-light" style="width: 90%; max-width: 750px;">
        <div class="d-flex justify-content-between">
          <h5>{{messages.projectsTitle}}</h5>
          <div>
            <template is="dom-if" if="{{clearFilters}}">
              <button type="button" on-click="_clearFilters" class="btn btn-outline-primary btn-sm">{{messages.clear}}</button>
            </template>
            <template id="tools" is="dom-repeat" as="tool" items="{{data.tools}}">
              <i on-click="_filter" class$="{{tool.icon}} tool" aria-hidden="true"></i>
            </template>
          </div>
        </div>
        <table class="table table-hover table-striped">
          <thead>
            <tr>
              <th>{{messages.projectsColumnName}}:</th>
              <th>{{messages.projectsColumnTools}}:</th>
              <th>{{messages.projectsColumnPage}}:</th>
            </tr>
          </thead>
          <tbody>
            <template is="dom-repeat" as="repository" items="{{repositoriesShow}}">
              <tr>
                <!-- <th scope="row"></th> -->
                <td>
                  <a target="_blank" class="text-secondary" href="{{repository.url}}">
                    {{repository.name}}
                    <i class="fas fa-external-link-alt"></i>
                    <template is="dom-if" if="{{repository.new}}">
                      <span class="badge badge-dark">New</span>
                    </template>
                  </a>
                </td>
                <td>
                  <div class="tools">
                    {{repository.toolsGroup}}
                    <!-- {{JSON.stringify(tool)}} -->
                    <!-- 
                    {{tool.join(',')}}
                    <template is="dom-repeat" as="tool" items="{{repository.tools}}">
                      {{tool}}
                    </template> -->
                  </div>
                </td>
                <td>
                  <template is="dom-if" if="[[repository.domainUrl]]">
                    <a target="_blank" class="text-primary" href="{{repository.domainUrl}}">
                      {{repository.domain}}
                      <i class="fas fa-external-link-alt"></i>
                    </a>
                  </template>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </div>
  </template>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
  <script>
    /**
     * @customElement
     * @polymer
     */
    class ProfileApp extends Polymer.Element {
      static get is() { return 'profile-app'; }
      static get properties() {
        return {
          messages: {
            type: Object,
            value: {
              clear: 'Clear',
              copied: 'Copied!',
              examples: 'Code examples',
              resume: 'Resume',
              projectsTitle: 'Repository projects',
              projectsColumnName: 'Project',
              projectsColumnPage: 'Page',
              projectsColumnTools: 'Tools'
            }
          },
          profile: {
            type: Object,
            value: {
              background: 'https://i.imgur.com/OUrEY8F.jpg'
            }
          },
          icons: {
            type: Object,
            value: {
              // linkedin: 'https://cdnjs.cloudflare.com/ajax/libs/ionicons/4.5.6/collection/build/ionicons/svg/logo-linkedin.svg',
              // download: 'https://cdnjs.cloudflare.com/ajax/libs/ionicons/4.5.6/collection/build/ionicons/svg/md-download.svg',
              // code: 'https://cdnjs.cloudflare.com/ajax/libs/ionicons/4.5.6/collection/icon/svg/md-code.svg',
              // github: 'https://cdnjs.cloudflare.com/ajax/libs/ionicons/4.5.6/collection/build/ionicons/svg/logo-github.svg'
            }
          },
          data: {
            type: Object,
            observer: '_changeData',
            value: {
              career: 'Ingeniería en informática',
              id: '11687330',
              name: 'Francisco Javier Castañeda Martínez',
              email: 'xavierxmac@gmail.com',
              linkedin: 'https://www.linkedin.com/in/francisco-javier-casta%C3%B1eda-mart%C3%ADnez-878936127/',
              github: 'https://github.com/donxd',
              image: 'https://media.licdn.com/dms/image/C4E03AQFYmoE7jsArGg/profile-displayphoto-shrink_200_200/0?e=1573689600&v=beta&t=yUuOx7H1RFYyOO7Y6_afUACZYsjc4X6fR-ddrgXdD_o',
              cf: 'https://app.codesignal.com/profile/donxd',
              tools: [
                {
                  icon: 'fab fa-js',
                  name: 'js'
                },
                {
                  icon: 'fab fa-html5',
                  name: 'html'
                },
                {
                  icon: 'fab fa-css3-alt',
                  name: 'css'
                },
                {
                  icon: 'fab fa-android',
                  name: 'android'
                },
                {
                  icon: 'fab fa-java',
                  name: 'java'
                },
                {
                  // icon: 'fab fa-node',
                  icon: 'fab fa-node-js',
                  name: 'node'
                },
                {
                  icon: 'fab fa-docker',
                  name: 'docker'
                }
              ],  
              resume: 'https://drive.google.com/file/d/0B3Zf_GJV62aPMEEzQVpXZldxTHc/view?usp=sharing',
              repositories: [
                {
                  name: 'mods-saes',
                  url: 'https://github.com/donxd/mods-saes',
                  domainUrl: 'https://chrome.google.com/webstore/detail/mods-saes/okaihfccgfhcjfineancjmhbooocebhn?hl=es',
                  domain: 'Chrome web store',
                  tools: ['js', 'html', 'css']
                },
                {
                  name: 'mipoli',
                  url: 'https://github.com/donxd/mipoli',
                  domainUrl: 'https://play.google.com/store/apps/details?id=ml.donxd.poliapp',
                  domain: 'Google play',
                  tools: ['android', 'java', 'js']
                },

                {
                  name: 'poly-frogs',
                  url: 'https://github.com/donxd/poly-frogs',
                  domainUrl: 'https://donxd.github.io/poly-frogs/',
                  domain: 'donxd.github.io/poly-frogs',
                  tools: ['polymer', 'html', 'js', 'css']
                },
                {
                  name: 'profile-info',
                  url: 'https://github.com/donxd/info',
                  domainUrl: 'https://donxd.github.io/info/',
                  domain: 'donxd.github.io/info',
                  tools: ['polymer', 'html', 'js', 'css']
                },

                {
                  name: 'celex-list-element',
                  url: 'https://github.com/donxd/celex-list-element',
                  tools: ['polymer', 'html', 'js', 'css']
                },
                {
                  name: 'celex-api',
                  url: 'https://github.com/donxd/celex-api',
                  tools: ['node', 'js', 'loopback', 'mysql']
                },
                {
                  name: 'celex-crawler',
                  url: 'https://github.com/donxd/celex-crawler',
                  tools: ['node', 'js', 'mysql']
                },

                {
                  name: 'reportes-ss-ipn',
                  new: false,
                  url: 'https://github.com/donxd/reportes-ss-ipn',
                  tools: ['php', 'js', 'html', 'css', 'word', 'excel']
                },

                {
                  name: 'cs-arcade-graphs-001',
                  new: true,
                  url: 'https://github.com/donxd/cs-arcade-graphs-001',
                  tools: ['js']
                },
                {
                  name: 'cs-arcade-graphs-002',
                  new: true,
                  url: 'https://github.com/donxd/cs-arcade-graphs-002',
                  tools: ['js']
                },
                {
                  name: 'cs-arcade-graphs-003',
                  new: true,
                  url: 'https://github.com/donxd/cs-arcade-graphs-003',
                  tools: ['js']
                },

                {
                  name: 'cf-scripts',
                  url: 'https://github.com/donxd/cs-test-scripts-organise',
                  tools: ['bash','git']
                },
                {
                  name: 'basic-node-service',
                  url: 'https://github.com/donxd/basic-node-service',
                  tools: ['node', 'express', 'js']
                },
                {
                  name: 'basic-kube',
                  url: 'https://github.com/donxd/basic-kube',
                  tools: ['kubernetes', 'docker', 'node', 'express']
                },

                {
                  name: 'js-poo',
                  url: 'https://github.com/donxd/js-poo-test-es',
                  tools: ['js']
                },

                
                {
                  name: 'mods-saes-mobile',
                  url: 'https://github.com/donxd/mods-saes-mobile',
                  tools: ['js', 'html', 'css']
                },

                {
                  name: 'cs-arcade-intro-001',
                  url: 'https://github.com/donxd/cs-arcade-intro-001',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-002',
                  url: 'https://github.com/donxd/cs-arcade-intro-002',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-003',
                  url: 'https://github.com/donxd/cs-arcade-intro-003',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-004',
                  url: 'https://github.com/donxd/cs-arcade-intro-004',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-005',
                  url: 'https://github.com/donxd/cs-arcade-intro-005',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-006',
                  url: 'https://github.com/donxd/cs-arcade-intro-006',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-007',
                  url: 'https://github.com/donxd/cs-arcade-intro-007',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-008',
                  url: 'https://github.com/donxd/cs-arcade-intro-008',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-009',
                  url: 'https://github.com/donxd/cs-arcade-intro-009',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-010',
                  url: 'https://github.com/donxd/cs-arcade-intro-010',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-011',
                  url: 'https://github.com/donxd/cs-arcade-intro-011',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-012',
                  url: 'https://github.com/donxd/cs-arcade-intro-012',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-013',
                  url: 'https://github.com/donxd/cs-arcade-intro-013',
                  tools: ['js']
                },
                {
                  name: 'cs-arcade-intro-014',
                  url: 'https://github.com/donxd/cs-arcade-intro-014',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-015',
                  url: 'https://github.com/donxd/cs-arcade-intro-015',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-016',
                  url: 'https://github.com/donxd/cs-arcade-intro-016',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-017',
                  url: 'https://github.com/donxd/cs-arcade-intro-017',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-018',
                  url: 'https://github.com/donxd/cs-arcade-intro-018',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-019',
                  url: 'https://github.com/donxd/cs-arcade-intro-019',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-020',
                  url: 'https://github.com/donxd/cs-arcade-intro-020',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-021',
                  url: 'https://github.com/donxd/cs-arcade-intro-021',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-022',
                  url: 'https://github.com/donxd/cs-arcade-intro-022',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-023',
                  url: 'https://github.com/donxd/cs-arcade-intro-023',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-024',
                  url: 'https://github.com/donxd/cs-arcade-intro-024',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-025',
                  url: 'https://github.com/donxd/cs-arcade-intro-025',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-026',
                  url: 'https://github.com/donxd/cs-arcade-intro-026',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-027',
                  url: 'https://github.com/donxd/cs-arcade-intro-027',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-028',
                  url: 'https://github.com/donxd/cs-arcade-intro-028',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-029',
                  url: 'https://github.com/donxd/cs-arcade-intro-029',
                  tools: ['java']
                },
                {
                  name: 'cs-arcade-intro-030',
                  url: 'https://github.com/donxd/cs-arcade-intro-030',
                  tools: ['java']
                },

                {
                  name: 'cs-arcade-db-001',
                  url: 'https://github.com/donxd/cs-arcade-db-001',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-002',
                  url: 'https://github.com/donxd/cs-arcade-db-002',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-003',
                  url: 'https://github.com/donxd/cs-arcade-db-003',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-004',
                  url: 'https://github.com/donxd/cs-arcade-db-004',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-005',
                  url: 'https://github.com/donxd/cs-arcade-db-005',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-006',
                  url: 'https://github.com/donxd/cs-arcade-db-006',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-007',
                  url: 'https://github.com/donxd/cs-arcade-db-007',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-008',
                  url: 'https://github.com/donxd/cs-arcade-db-008',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-009',
                  url: 'https://github.com/donxd/cs-arcade-db-009',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-010',
                  url: 'https://github.com/donxd/cs-arcade-db-010',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-011',
                  url: 'https://github.com/donxd/cs-arcade-db-011',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-012',
                  url: 'https://github.com/donxd/cs-arcade-db-012',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-013',
                  url: 'https://github.com/donxd/cs-arcade-db-013',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-014',
                  url: 'https://github.com/donxd/cs-arcade-db-014',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-015',
                  url: 'https://github.com/donxd/cs-arcade-db-015',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-016',
                  url: 'https://github.com/donxd/cs-arcade-db-016',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-017',
                  url: 'https://github.com/donxd/cs-arcade-db-017',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-018',
                  url: 'https://github.com/donxd/cs-arcade-db-018',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-019',
                  url: 'https://github.com/donxd/cs-arcade-db-019',
                  tools: ['sql']
                },
                {
                  name: 'cs-arcade-db-020',
                  url: 'https://github.com/donxd/cs-arcade-db-020',
                  tools: ['sql']
                }

              ]
            }
          }
        };
      }
      ready () {
        super.ready();
        // this.fixSize = window.innerHeight - this.$.navbarprofile.offsetHeight;
        this._setFixSize();
        window.onresize = () => this._setFixSize();
      }
      _setFixSize () {
        this.fixSize = window.innerHeight - this.$.navbarprofile.offsetHeight;
        // this.fixSize = window.innerHeight - this.$.navbarprofile.offsetHeight -100;
        // this.fixSize = 500;
      }
      _changeData (newData, oldData) {
        this.filterByTools = new Set();
        this.selectedTools = [];
        this._prepareData(newData);
      }
      _prepareData (data) {
        if (data && data.repositories) {
          $(this.$.mail).tooltip({trigger: 'manual', placement: 'right'});
          $(this.$.examples).tooltip();
          $(this.$.resume).tooltip();

          document.querySelectorAll = (selector) => this.shadowRoot.querySelectorAll(selector);
          document.querySelector = (selector) => this.shadowRoot.querySelector(selector);

          // $(this.$.profile).scrollspy({ target: '#navbarprofile', offset: 10 });
          // $(this.$.profile).scrollspy({ target: '#navbarprofile', offset: 0 });
          // const tracking = $(this.$.profile).scrollspy({ target: '#navbarprofile' });
          $(this.$.profile).scrollspy({ target: '#navbarprofile' });
          // console.log('tracking : ', tracking);
          // $(this.$.profile).scrollspy('refresh');
          // console.log('tracking : ', $(this.$.profile)._activeTarget);
          // console.log('tracking : ', typeof $(this.$.profile).scrollspy);
          // console.log('tracking : ', instanceof $(this.$.profile).scrollspy);
          // console.log('tracking : ', $(this.$.profile).scrollspy());
          // console.log('tracking : ', $(this.$.profile));
          // console.log('tracking : ', $(this.$.profile).data());
          // console.log('tracking : ', $(this.$.profile).data()['bs.scrollspy']);
          // console.log('tracking : ', $(this.$.profile).data()['bs.scrollspy']._activeTarget);
          console.log('tracking : ', $(this.$.profile).data()['bs.scrollspy']);
          console.log('tracking i : ', $(this.$.profile).data()['bs.scrollspy']._activeTarget);
          $(this.$.profile).data()['bs.scrollspy']._activeTarget = '#algo';
          console.log('tracking c : ', $(this.$.profile).data()['bs.scrollspy']._activeTarget);
          // $(this.$.profile).scrollspy('refresh');
          // $(this.$.profile).data()['bs.scrollspy'].refresh();
          // console.log('tracking * : ', $(this.$.profile).data()['bs.scrollspy']._getConfig());
          // $(this.$.profile).data()['bs.scrollspy']._clear();
          $(this.$.profile).data()['bs.scrollspy']._activate('#algo');
          // $(this.$.profile).data()['bs.scrollspy']._activeTarget = '#algo';
          // $(this.$.profile).data('bs.scrollspy', {_activeTarget: '#algo'});
          // $(this.$.profile).data()['bs.scrollspy']._process();
          // $(this.$.profile).data()['bs.scrollspy'].refresh();
          console.log('tracking f : ', $(this.$.profile).data()['bs.scrollspy']._activeTarget);
          // console.log('tracking : ', jQuery(this.$.profile));

          // $(this.$.profile).on('activate.bs.scrollspy', function () {
          //   // do something…
          //   console.log('done 1');
          // });

          // // console.log('tracking : ', $(this.$.profile).scrollspy._activeTarget);
          // // // _activeTarget
          // setTimeout(() => {
          //   $(this.$.profile).scrollspy('refresh');
          //   // this.$.algo.focus();
          //   console.log('done 2');
          // }, 2000);
          // $(this.$.examplenav).scrollspy({ target: '#navbarexample2' });

          for (let x of data.repositories) {
            x.toolsGroup = this._prepareTools(x.tools);
          }
          const copyMail = new ClipboardJS(this.$.mail, {
            text: trigger => {
              $(this.$.mail).tooltip('show');
              setTimeout(() => $(this.$.mail).tooltip('hide'), 1500);
              return this.data.email;
            }
          });
          this.repositoriesShow = data.repositories;
        }
      }
      _prepareTools (tools) {
        return tools.join(', ');
      }

      _filter (event) {
        // console.log('event : ', event);
        let item = this.$.tools.itemForElement(event.target);
        // console.log('item : ', item);
        if (this.filterByTools.has(item.name)) {
          this.filterByTools.delete(item.name);
          event.target.classList.remove('selected');
        } else {
          this.filterByTools.add(item.name);
          event.target.classList.add('selected');
          this.selectedTools.push(event.target);
        }
        // item.classList.add('selected');
        // this.filterByTools.add(item.name);
        this._filterTools();
      }

      _filterTools () {
        this.clearFilters = !!this.filterByTools.size;
        // this.repositoriesShow = [...this.data.repositories.filter(repository => repository.name === item.name)];
        this.repositoriesShow = this.data.repositories.filter(repository => this._searchElements(repository.tools, this.filterByTools));
      }

      _clearFilters () {
        this.filterByTools.clear();
        for (let x of this.selectedTools) {
          x.classList.remove('selected');
        }
        this._filterTools();
      }

      _searchElements (tools, filters) {
        let count = 0;
        for (let x of Array.from(filters)) {
          // if (tools.includes(x)) return true;
          if (tools.includes(x)) count++;
        }
        return count === filters.size;
      } 
    }

    window.customElements.define(ProfileApp.is, ProfileApp);
  </script>
</dom-module>
